
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Driving Change: TEDxDAU 2025 Crossword Puzzle</title>
  <style>
    body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #000000;
            color: #ffffff;
        }
        
        h1 {
            text-align: center;
            color: #ffffff;
            margin-bottom: 30px;
            display: none; /* Hide the text heading since we're using the image */
        }
        
        .header-image {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto 30px;
            display: block;
        }
        
        .crossword-container {
            display: grid;
            grid-template-columns: repeat(21, 30px);
            grid-gap: 0;
            margin: 0 auto 40px;
            width: fit-content;
            border: 2px solid #555;
            background-color: #000;
        }
        
        .crossword-cell {
            width: 30px;
            height: 30px;
            border: 1px solid #555;
            display: flex;
            flex-direction: column;
            position: relative;
            background-color: white;
        }
        
        .black-cell {
            background-color: #111;
            border: 1px solid #333;
        }
        
        .cell-number {
            position: absolute;
            top: 1px;
            left: 2px;
            font-size: 10px;
            z-index: 10;
            color: #000;
        }
        
        input {
            width: 100%;
            height: 100%;
            border: none;
            text-align: center;
            font-size: 18px;
            text-transform: uppercase;
            background: transparent;
            outline: none;
            color: #000;
        }
        
        .clue-lists {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-top: 40px;
        }
        
        .clue-list {
            width: 48%;
            margin-bottom: 20px;
        }
        
        .clue-list h2 {
            color: #cccccc;
            border-bottom: 2px solid #555;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }
        
        .clue-list ol {
            padding-left: 25px;
        }
        
        .clue-list li {
            margin-bottom: 8px;
            line-height: 1.4;
            color: #dddddd;
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 20px;
        }
        
        button {
            padding: 10px 20px;
            background-color: #e62b1e; /* TEDx red color */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #c62118; /* Darker TEDx red on hover */
        }
        
        .completion-message {
            display: none;
            text-align: center;
            padding: 15px;
            background-color: #143628;
            color: #a0ffb0;
            border-radius: 5px;
            margin: 20px 0;
            font-weight: bold;
            border: 1px solid #2abb43;
        }/* Omitted for brevity: Copy your full CSS here from original file */
  </style>
</head>
<body>
  <h1>Driving Change: TEDxDAU 2025 Crossword Puzzle</h1>
  <img src="https://raw.githubusercontent.com/BelovedCoachP/tedxdau-crossword-puzzle/refs/heads/main/DrivingChange_1920x1080_external.png" alt="Driving Change Logo" class="header-image">

  <div class="buttons">
    <button id="check-button">Check Answers</button>
    <button id="reveal-button">Reveal Solution</button>
    <button id="reset-button">Reset Puzzle</button>
  </div>

  <div id="completion-message" class="completion-message">
    Congratulations! You've completed the puzzle!
  </div>

  <div class="crossword-container" id="crossword"></div>

  <div class="clue-lists">
    <div class="clue-list">
      <h2>Across</h2>
      <ol id="across-clues"></ol>
    </div>
    <div class="clue-list">
      <h2>Down</h2>
      <ol id="down-clues"></ol>
    </div>
  </div>

  <script>
    // Omitted: Include full puzzleData, other JS logic...
    
// PATCHED VERSION OF createCrosswordGrid()
function createCrosswordGrid() {
    const crosswordDiv = document.getElementById('crossword');
    const width = puzzleData.width;
    const height = puzzleData.height;

    crosswordDiv.innerHTML = '';

    const grid = Array(height).fill().map(() => Array(width).fill(false));
    const numberGrid = Array(height).fill().map(() => Array(width).fill(0));

    let clueNumber = 1;

    const validAnswers = puzzleData.answers.filter(answer => {
        const { row, col, direction, answer: word } = answer;
        if (row < 1 || row > height || col < 1 || col > width) {
            console.error(`Answer out of bounds: ${word} at position row=${row}, col=${col}`);
            return false;
        }
        if (direction === 'across' && col + word.length - 1 > width) {
            console.error(`Across word too long: ${word} at position row=${row}, col=${col}`);
            return false;
        }
        if (direction === 'down' && row + word.length - 1 > height) {
            console.error(`Down word too long: ${word} at position row=${row}, col=${col}`);
            return false;
        }
        return true;
    });

    // PATCH: Always assign clue number if start cell has 0
    validAnswers.forEach(answer => {
        const { row, col, direction, answer: word } = answer;

        if (numberGrid[row - 1][col - 1] === 0) {
            numberGrid[row - 1][col - 1] = clueNumber++;
        }

        for (let i = 0; i < word.length; i++) {
            if (direction === 'across') {
                grid[row - 1][col - 1 + i] = true;
            } else {
                grid[row - 1 + i][col - 1] = true;
            }
        }
    });

    validAnswers.forEach(answer => {
        const { row, col, direction, answer: word } = answer;
        const answerKey = `${direction}-${numberGrid[row - 1][col - 1]}`;
        correctAnswers[answerKey] = word;
    });

    for (let i = 0; i < height; i++) {
        for (let j = 0; j < width; j++) {
            const cell = document.createElement('div');
            cell.className = grid[i][j] ? 'crossword-cell' : 'crossword-cell black-cell';

            if (grid[i][j]) {
                const input = document.createElement('input');
                input.maxLength = 1;
                input.dataset.row = i + 1;
                input.dataset.col = j + 1;
                input.addEventListener('keydown', handleKeyDown);
                input.addEventListener('input', handleInput);
                cell.appendChild(input);

                if (numberGrid[i][j] > 0) {
                    const numberSpan = document.createElement('span');
                    numberSpan.className = 'cell-number';
                    numberSpan.textContent = numberGrid[i][j];
                    cell.appendChild(numberSpan);
                }
            }

            crosswordDiv.appendChild(cell);
        }
    }

    populateClueList('across-clues', puzzleData.clues.across);
    populateClueList('down-clues', puzzleData.clues.down);
}

    // Omitted: Include rest of script: checkAnswers, handleInput, etc.
  </script>
</body>
</html>
